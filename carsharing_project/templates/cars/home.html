{% extends 'base.html' %}
{% load static %}

{% block title %}Главная - Каршеринг{% endblock %}

{% block content %}
<!-- Герой-секция -->
<section class="hero-section">
    <div class="container text-center">
        <h1 class="display-4 fw-bold mb-4">Аренда автомобилей стала проще</h1>
        <p class="lead mb-4">Выберите из сотен автомобилей по всей России. Бронируйте онлайн, экономьте время и деньги.</p>
        <a href="{% url 'car_list' %}" class="btn btn-light btn-lg">
            <i class="bi bi-search"></i> Начать поиск
        </a>
    </div>
</section>

<!-- Поиск -->
<div class="container mb-5">
    <div class="card shadow">
        <div class="card-body">
            <form method="get" action="{% url 'car_list' %}" class="row g-3">
                <div class="col-md-4">
                    <input type="text" class="form-control" name="search" placeholder="Марка, модель или описание...">
                </div>
                <div class="col-md-3">
                    <select class="form-select" name="category">
                        <option value="">Все категории</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}">{{ category.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <select class="form-select" name="sort">
                        <option value="created_at">Новинки</option>
                        <option value="price_asc">Цена: по возрастанию</option>
                        <option value="price_desc">Цена: по убыванию</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-search"></i> Найти
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Популярные автомобили -->
<div class="container">
    <h2 class="mb-4">Популярные автомобили</h2>
    
    {% if cars %}
        <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for car in cars %}
                <div class="col">
                    <div class="card car-card h-100">
                        {% if car.image %}
                            <img src="{{ car.image.url }}" class="card-img-top car-img" alt="{{ car.brand }} {{ car.model }}">
                        {% else %}
                            <img src="https://via.placeholder.com/300x200/cccccc/969696?text=No+Image" class="card-img-top car-img" alt="No image">
                        {% endif %}
                        
                        <div class="card-body">
                            <h5 class="card-title">{{ car.brand }} {{ car.model }}</h5>
                            <p class="card-text">
                                <small class="text-muted">{{ car.year }} год • {{ car.transmission.name }}</small>
                            </p>
                            <p class="card-text">{{ car.description|truncatewords:20 }}</p>
                            
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <span class="h4">{{ car.price_per_hour }} ₽/час</span><br>
                                    <small>{{ car.price_per_day }} ₽/сутки</small>
                                </div>
                                <a href="{% url 'car_detail' car.id %}" class="btn btn-primary">
                                    Подробнее
                                </a>
                            </div>
                        </div>
                        
                        <div class="card-footer bg-white">
                            <small class="text-muted">
                                <i class="bi bi-geo-alt"></i> {{ car.address|default:"Адрес не указан" }}
                            </small>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">
            <i class="bi bi-info-circle"></i> Нет доступных автомобилей в данный момент.
        </div>
    {% endif %}
</div>

<!-- Преимущества -->
<div class="container mt-5">
    <h2 class="text-center mb-5">Почему выбирают нас?</h2>
    
    <div class="row text-center">
        <div class="col-md-3 mb-4">
            <div class="p-4 rounded-circle bg-primary text-white d-inline-block mb-3">
                <i class="bi bi-lightning-charge-fill" style="font-size: 2rem;"></i>
            </div>
            <h4>Быстро</h4>
            <p>Бронирование за 5 минут</p>
        </div>
        
        <div class="col-md-3 mb-4">
            <div class="p-4 rounded-circle bg-success text-white d-inline-block mb-3">
                <i class="bi bi-shield-check" style="font-size: 2rem;"></i>
            </div>
            <h4>Безопасно</h4>
            <p>Страхование и проверка водителей</p>
        </div>
        
        <div class="col-md-3 mb-4">
            <div class="p-4 rounded-circle bg-warning text-white d-inline-block mb-3">
                <i class="bi bi-cash-coin" style="font-size: 2rem;"></i>
            </div>
            <h4>Выгодно</h4>
            <p>Цены на 30% ниже такси</p>
        </div>
        
        <div class="col-md-3 mb-4">
            <div class="p-4 rounded-circle bg-info text-white d-inline-block mb-3">
                <i class="bi bi-headset" style="font-size: 2rem;"></i>
            </div>
            <h4>Поддержка 24/7</h4>
            <p>Круглосуточная помощь</p>
        </div>
    </div>
</div>
{% endblock %}